<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Assets/3. Scripts/2. Ui/HomeUIManager.cs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Assets/3. Scripts/2. Ui/HomeUIManager.cs" />
              <option name="originalContent" value="using System;&#10;using TMPro;&#10;using UnityEngine;&#10;using UnityEngine.UI;&#10;&#10;public class HomeUIManager : MonoBehaviour&#10;{&#10;    #region Singleton&#10;    &#10;    public static HomeUIManager Instance { get; private set; }&#10;    &#10;    #endregion&#10;    &#10;    #region UI Panels&#10;    &#10;    [Header(&quot;Panels&quot;)]&#10;    [SerializeField] private GameObject HomePanel;&#10;    [SerializeField] private GameObject PrivateLobbyPanel;&#10;    [SerializeField] private GameObject JoinLobbyPanel;&#10;    [SerializeField] private GameObject PlayerJoinedPanel;&#10;    [SerializeField] private GameObject LoadingPanel;&#10;    [SerializeField] private GameObject PvpDisplayPanel;&#10;    &#10;    #endregion&#10;    &#10;    #region UI Buttons&#10;    &#10;    [Header(&quot;Main Buttons&quot;)]&#10;    [SerializeField] private Button CampaignButton;&#10;    [SerializeField] private Button PrivateLobbyButton;&#10;    [SerializeField] private Button PVPButton;&#10;    &#10;    [Header(&quot;Lobby Buttons&quot;)]&#10;    [SerializeField] private Button CreateLobbyButton;&#10;    [SerializeField] private Button OuterJoinLobbyButton;&#10;    [SerializeField] private Button JoinLobbyButton;&#10;    &#10;    [Header(&quot;Navigation Buttons&quot;)]&#10;    [SerializeField] private Button PrivateLobbyBackButton;&#10;    [SerializeField] private Button JoinLobbyBackButton;&#10;    &#10;    #endregion&#10;    &#10;    #region UI Elements&#10;    &#10;    [Header(&quot;Join Panel Elements&quot;)]&#10;    [SerializeField] private TMP_InputField LobbyCodeInputField;&#10;    [SerializeField] private TextMeshProUGUI LobbyCodeErrorText;&#10;    &#10;    [Header(&quot;Player Info Elements&quot;)]&#10;    [SerializeField] private TextMeshProUGUI Player1NameText;&#10;    [SerializeField] private TextMeshProUGUI Player1RankText;&#10;    [SerializeField] private TextMeshProUGUI Player2NameText;&#10;    [SerializeField] private TextMeshProUGUI Player2RankText;&#10;    [SerializeField] private TextMeshProUGUI SessionCodeText;&#10;    &#10;    #endregion&#10;&#10;    #region Unity Lifecycle&#10;    &#10;    private void Awake()&#10;    {&#10;        InitializeSingleton();&#10;    }&#10;    &#10;    private void Start()&#10;    {&#10;        SetupButtonListeners();&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Initialization&#10;    &#10;    private void InitializeSingleton()&#10;    {&#10;        if (Instance == null)&#10;        {&#10;            Instance = this;&#10;        }&#10;        else&#10;        {&#10;            Destroy(gameObject);&#10;        }&#10;    }&#10;    &#10;    private void SetupButtonListeners()&#10;    {&#10;        // Main menu buttons&#10;        CampaignButton.onClick.AddListener(OnClickCampaignButton);&#10;        PrivateLobbyButton.onClick.AddListener(OnClickPrivateLobbyButton);&#10;        PVPButton.onClick.AddListener(OnClickPVPButton);&#10;        &#10;        // Lobby buttons&#10;        CreateLobbyButton.onClick.AddListener(OnClickCreateLobbyButton);&#10;        OuterJoinLobbyButton.onClick.AddListener(OpenJoinLobbyPanel);&#10;        JoinLobbyButton.onClick.AddListener(OnJoinButtonClicked);&#10;        &#10;        // Navigation buttons&#10;        PrivateLobbyBackButton.onClick.AddListener(OnPrivateLobbyBackButton);&#10;        JoinLobbyBackButton.onClick.AddListener(OnJoinLobbyBackButton);&#10;    }&#10;    &#10;    #endregion&#10;&#10;    #region Button Event Handlers&#10;    &#10;    private void OnClickCampaignButton()&#10;    {&#10;        SwitchPanel(HomePanel, LoadingPanel);&#10;        // TODO: Load Campaign Scene&#10;    }&#10;    &#10;    private void OnClickPVPButton()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.PvP);&#10;        SwitchPanel(HomePanel, LoadingPanel);&#10;        &#10;        // Start matchmaking and show PvP panel after delay&#10;        Invoke(nameof(StartPvPAndShowPanel), 0.1f);&#10;    }&#10;    &#10;    private void StartPvPAndShowPanel()&#10;    {&#10;        PhotonNetworkManager.Instance.StartPvPMatchmaking();&#10;        &#10;        // Show PvP panel after 3 seconds to allow player spawning&#10;        Invoke(nameof(ShowPvPPanel), 3f);&#10;    }&#10;    &#10;    private void ShowPvPPanel()&#10;    {&#10;        SwitchPanel(LoadingPanel, PvpDisplayPanel);&#10;    }&#10;    &#10;    private void OnClickPrivateLobbyButton()&#10;    {&#10;        Debug.Log(&quot;[HomeUIManager] Private lobby button clicked&quot;);&#10;        SwitchPanel(HomePanel, PrivateLobbyPanel);&#10;    }&#10;    &#10;    private void OnClickCreateLobbyButton()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.HostClient);&#10;        SwitchPanel(PrivateLobbyPanel, LoadingPanel);&#10;        &#10;        // Start lobby creation and show panel after delay&#10;        Invoke(nameof(StartLobbyAndShowPanel), 0.1f);&#10;    }&#10;    &#10;    private void StartLobbyAndShowPanel()&#10;    {&#10;        PhotonNetworkManager.Instance.CreateLobby();&#10;        &#10;        // Show lobby panel after 3 seconds (unlimited waiting after that)&#10;        Invoke(nameof(ShowLobbyPanel), 3f);&#10;    }&#10;    &#10;    private void ShowLobbyPanel()&#10;    {&#10;        SwitchPanel(LoadingPanel, PlayerJoinedPanel);&#10;    }&#10;    &#10;    private void OpenJoinLobbyPanel()&#10;    {&#10;        SwitchPanel(PrivateLobbyPanel, JoinLobbyPanel);&#10;    }&#10;    &#10;    private void OnJoinButtonClicked()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.HostClient);&#10;        SwitchPanel(JoinLobbyPanel, PlayerJoinedPanel);&#10;        PhotonNetworkManager.Instance.JoinLobby(LobbyCodeInputField.text);&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Navigation Handlers&#10;    &#10;    private void OnPrivateLobbyBackButton()&#10;    {&#10;        SwitchPanel(PrivateLobbyPanel, HomePanel);&#10;    }&#10;    &#10;    private void OnJoinLobbyBackButton()&#10;    {&#10;        SwitchPanel(JoinLobbyPanel, PrivateLobbyPanel);&#10;    }&#10;    &#10;    #endregion&#10;&#10;    #region Public API&#10;    &#10;    public void UpdateSessionCode(string sessionCode)&#10;    {&#10;        SessionCodeText.text = $&quot;Session code: {sessionCode}&quot;;&#10;    }&#10;    &#10;    public void ShowError(string error)&#10;    {&#10;        LobbyCodeErrorText.text = error;&#10;    }&#10;    &#10;    public void SwitchToHomePanel()&#10;    {&#10;        // Cancel any pending PvP panel shows&#10;        CancelInvoke(nameof(ShowPvPPanel));&#10;        &#10;        // Turn off all other panels and show home panel&#10;        PvpDisplayPanel?.SetActive(false);&#10;        LoadingPanel?.SetActive(false);&#10;        PrivateLobbyPanel?.SetActive(false);&#10;        JoinLobbyPanel?.SetActive(false);&#10;        PlayerJoinedPanel?.SetActive(false);&#10;        &#10;        HomePanel?.SetActive(true);&#10;        Debug.Log(&quot;[HomeUIManager] Switched to home panel&quot;);&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Helper Methods&#10;    &#10;    private void SwitchPanel(GameObject fromPanel, GameObject toPanel)&#10;    {&#10;        string fromName = fromPanel != null ? fromPanel.name : &quot;null&quot;;&#10;        string toName = toPanel != null ? toPanel.name : &quot;null&quot;;&#10;        Debug.Log($&quot;[HomeUIManager] SwitchPanel called. From: {fromName}, To: {toName}&quot;);&#10;&#10;        if (fromPanel != null)&#10;        {&#10;            bool wasActive = fromPanel.activeSelf;&#10;            fromPanel.SetActive(false);&#10;            Debug.Log($&quot;[HomeUIManager] Deactivated panel: {fromName} (wasActive: {wasActive})&quot;);&#10;        }&#10;        else&#10;        {&#10;            Debug.Log(&quot;[HomeUIManager] From panel is null, nothing to deactivate.&quot;);&#10;        }&#10;&#10;        if (toPanel != null)&#10;        {&#10;            bool wasActive = toPanel.activeSelf;&#10;            toPanel.SetActive(true);&#10;            Debug.Log($&quot;[HomeUIManager] Activated panel: {toName} (wasActive: {wasActive})&quot;);&#10;        }&#10;        else&#10;        {&#10;            Debug.Log(&quot;[HomeUIManager] To panel is null, nothing to activate.&quot;);&#10;        }&#10;&#10;        // Fallback: Ensure at least one panel is active&#10;        if ((toPanel == null || !toPanel.activeSelf) &amp;&amp; fromPanel != null)&#10;        {&#10;            fromPanel.SetActive(true);&#10;            Debug.Log($&quot;[HomeUIManager] Fallback activated panel: {fromName}&quot;);&#10;        }&#10;    }&#10;&#10;    #endregion&#10;}&#10;" />
              <option name="updatedContent" value="using System;&#10;using TMPro;&#10;using UnityEngine;&#10;using UnityEngine.UI;&#10;&#10;public class HomeUIManager : MonoBehaviour&#10;{&#10;    #region Singleton&#10;    &#10;    public static HomeUIManager Instance { get; private set; }&#10;    &#10;    #endregion&#10;    &#10;    #region UI Panels&#10;    &#10;    [Header(&quot;Panels&quot;)]&#10;    [SerializeField] private GameObject HomePanel;&#10;    [SerializeField] private GameObject PrivateLobbyPanel;&#10;    [SerializeField] private GameObject JoinLobbyPanel;&#10;    [SerializeField] private GameObject PlayerJoinedPanel;&#10;    [SerializeField] private GameObject LoadingPanel;&#10;    [SerializeField] private GameObject PvpDisplayPanel;&#10;    &#10;    #endregion&#10;    &#10;    #region UI Buttons&#10;    &#10;    [Header(&quot;Main Buttons&quot;)]&#10;    [SerializeField] private Button CampaignButton;&#10;    [SerializeField] private Button PrivateLobbyButton;&#10;    [SerializeField] private Button PVPButton;&#10;    &#10;    [Header(&quot;Lobby Buttons&quot;)]&#10;    [SerializeField] private Button CreateLobbyButton;&#10;    [SerializeField] private Button OuterJoinLobbyButton;&#10;    [SerializeField] private Button JoinLobbyButton;&#10;    &#10;    [Header(&quot;Navigation Buttons&quot;)]&#10;    [SerializeField] private Button PrivateLobbyBackButton;&#10;    [SerializeField] private Button JoinLobbyBackButton;&#10;    &#10;    #endregion&#10;    &#10;    #region UI Elements&#10;    &#10;    [Header(&quot;Join Panel Elements&quot;)]&#10;    [SerializeField] private TMP_InputField LobbyCodeInputField;&#10;    [SerializeField] private TextMeshProUGUI LobbyCodeErrorText;&#10;    &#10;    [Header(&quot;Player Info Elements&quot;)]&#10;    [SerializeField] private TextMeshProUGUI Player1NameText;&#10;    [SerializeField] private TextMeshProUGUI Player1RankText;&#10;    [SerializeField] private TextMeshProUGUI Player2NameText;&#10;    [SerializeField] private TextMeshProUGUI Player2RankText;&#10;    [SerializeField] private TextMeshProUGUI SessionCodeText;&#10;    &#10;    #endregion&#10;&#10;    #region Unity Lifecycle&#10;    &#10;    private void Awake()&#10;    {&#10;        InitializeSingleton();&#10;    }&#10;    &#10;    private void Start()&#10;    {&#10;        SetupButtonListeners();&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Initialization&#10;    &#10;    private void InitializeSingleton()&#10;    {&#10;        if (Instance == null)&#10;        {&#10;            Instance = this;&#10;        }&#10;        else&#10;        {&#10;            Destroy(gameObject);&#10;        }&#10;    }&#10;    &#10;    private void SetupButtonListeners()&#10;    {&#10;        // Main menu buttons&#10;        CampaignButton.onClick.AddListener(OnClickCampaignButton);&#10;        PrivateLobbyButton.onClick.AddListener(OnClickPrivateLobbyButton);&#10;        PVPButton.onClick.AddListener(OnClickPVPButton);&#10;        &#10;        // Lobby buttons&#10;        CreateLobbyButton.onClick.AddListener(OnClickCreateLobbyButton);&#10;        OuterJoinLobbyButton.onClick.AddListener(OpenJoinLobbyPanel);&#10;        JoinLobbyButton.onClick.AddListener(OnJoinButtonClicked);&#10;        &#10;        // Navigation buttons&#10;        PrivateLobbyBackButton.onClick.AddListener(OnPrivateLobbyBackButton);&#10;        JoinLobbyBackButton.onClick.AddListener(OnJoinLobbyBackButton);&#10;    }&#10;    &#10;    #endregion&#10;&#10;    #region Button Event Handlers&#10;    &#10;    private void OnClickCampaignButton()&#10;    {&#10;        SwitchPanel(HomePanel, LoadingPanel);&#10;        // TODO: Load Campaign Scene&#10;    }&#10;    &#10;    private void OnClickPVPButton()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.PvP);&#10;        SwitchPanel(HomePanel, LoadingPanel);&#10;        &#10;        // Start matchmaking and show PvP panel after delay&#10;        Invoke(nameof(StartPvPAndShowPanel), 0.1f);&#10;    }&#10;    &#10;    private void StartPvPAndShowPanel()&#10;    {&#10;        PhotonNetworkManager.Instance.StartPvPMatchmaking();&#10;        &#10;        // Show PvP panel after 3 seconds to allow player spawning&#10;        Invoke(nameof(ShowPvPPanel), 3f);&#10;    }&#10;    &#10;    private void ShowPvPPanel()&#10;    {&#10;        SwitchPanel(LoadingPanel, PvpDisplayPanel);&#10;    }&#10;    &#10;    private void OnClickPrivateLobbyButton()&#10;    {&#10;        Debug.Log(&quot;[HomeUIManager] Private lobby button clicked&quot;);&#10;        SwitchPanel(HomePanel, PrivateLobbyPanel);&#10;    }&#10;    &#10;    private void OnClickCreateLobbyButton()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.HostClient);&#10;        SwitchPanel(PrivateLobbyPanel, LoadingPanel);&#10;        &#10;        // Start lobby creation and show panel after delay&#10;        Invoke(nameof(StartLobbyAndShowPanel), 0.1f);&#10;    }&#10;    &#10;    private void StartLobbyAndShowPanel()&#10;    {&#10;        PhotonNetworkManager.Instance.CreateLobby();&#10;        &#10;        // Show lobby panel after 3 seconds (unlimited waiting after that)&#10;        Invoke(nameof(ShowLobbyPanel), 3f);&#10;    }&#10;    &#10;    private void ShowLobbyPanel()&#10;    {&#10;        SwitchPanel(LoadingPanel, PlayerJoinedPanel);&#10;    }&#10;    &#10;    private void OpenJoinLobbyPanel()&#10;    {&#10;        SwitchPanel(PrivateLobbyPanel, JoinLobbyPanel);&#10;    }&#10;    &#10;    private void OnJoinButtonClicked()&#10;    {&#10;        CustomGameMode.SetGameMode(GameModeType.HostClient);&#10;        SwitchPanel(JoinLobbyPanel, PlayerJoinedPanel);&#10;        PhotonNetworkManager.Instance.JoinLobby(LobbyCodeInputField.text);&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Navigation Handlers&#10;    &#10;    private void OnPrivateLobbyBackButton()&#10;    {&#10;        SwitchPanel(PrivateLobbyPanel, HomePanel);&#10;    }&#10;    &#10;    private void OnJoinLobbyBackButton()&#10;    {&#10;        SwitchPanel(JoinLobbyPanel, PrivateLobbyPanel);&#10;    }&#10;    &#10;    #endregion&#10;&#10;    #region Public API&#10;    &#10;    public void UpdateSessionCode(string sessionCode)&#10;    {&#10;        SessionCodeText.text = $&quot;Session code: {sessionCode}&quot;;&#10;    }&#10;    &#10;    public void ShowError(string error)&#10;    {&#10;        LobbyCodeErrorText.text = error;&#10;    }&#10;    &#10;    public void SwitchToHomePanel()&#10;    {&#10;        // Cancel any pending PvP panel shows&#10;        CancelInvoke(nameof(ShowPvPPanel));&#10;        &#10;        // Turn off all other panels and show home panel&#10;        PvpDisplayPanel?.SetActive(false);&#10;        LoadingPanel?.SetActive(false);&#10;        PrivateLobbyPanel?.SetActive(false);&#10;        JoinLobbyPanel?.SetActive(false);&#10;        PlayerJoinedPanel?.SetActive(false);&#10;        &#10;        HomePanel?.SetActive(true);&#10;        Debug.Log(&quot;[HomeUIManager] Switched to home panel&quot;);&#10;    }&#10;    &#10;    #endregion&#10;    &#10;    #region Helper Methods&#10;    &#10;    private void SwitchPanel(GameObject fromPanel, GameObject toPanel)&#10;    {&#10;        string fromName = fromPanel != null ? fromPanel.name : &quot;null&quot;;&#10;        string toName = toPanel != null ? toPanel.name : &quot;null&quot;;&#10;        Debug.Log($&quot;[HomeUIManager] SwitchPanel called. From: {fromName}, To: {toName}&quot;);&#10;&#10;        if (fromPanel != null)&#10;        {&#10;            bool wasActive = fromPanel.activeSelf;&#10;            fromPanel.SetActive(false);&#10;            Debug.Log($&quot;[HomeUIManager] Deactivated panel: {fromName} (wasActive: {wasActive})&quot;);&#10;        }&#10;        else&#10;        {&#10;            Debug.Log(&quot;[HomeUIManager] From panel is null, nothing to deactivate.&quot;);&#10;        }&#10;&#10;        if (toPanel != null)&#10;        {&#10;            bool wasActive = toPanel.activeSelf;&#10;            toPanel.SetActive(true);&#10;            Debug.Log($&quot;[HomeUIManager] Activated panel: {toName} (wasActive: {wasActive})&quot;);&#10;        }&#10;        else&#10;        {&#10;            Debug.Log(&quot;[HomeUIManager] To panel is null, nothing to activate.&quot;);&#10;        }&#10;&#10;        // Fallback: Ensure at least one panel is active&#10;        if ((toPanel == null || !toPanel.activeSelf) &amp;&amp; fromPanel != null)&#10;        {&#10;            fromPanel.SetActive(true);&#10;            Debug.Log($&quot;[HomeUIManager] Fallback activated panel: {fromName}&quot;);&#10;        }&#10;    }&#10;&#10;    #endregion&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>